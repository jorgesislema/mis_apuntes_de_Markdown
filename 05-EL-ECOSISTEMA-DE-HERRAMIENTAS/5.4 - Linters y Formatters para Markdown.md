# Linters y Formatters para Markdown

## Índice
- [¿Qué son los linters y formatters?](#qué-son-los-linters-y-formatters)
- [¿Por qué son importantes para Markdown?](#por-qué-son-importantes-para-markdown)
- [Principales linters para Markdown](#principales-linters-para-markdown)
- [Principales formatters para Markdown](#principales-formatters-para-markdown)
- [Integración con editores](#integración-con-editores)
- [Integración con CI/CD](#integración-con-cicd)
- [Configurando reglas personalizadas](#configurando-reglas-personalizadas)
- [Comparativa de herramientas](#comparativa-de-herramientas)
- [Ejercicios prácticos](#ejercicios-prácticos)

## ¿Qué son los linters y formatters?

Los **linters** y **formatters** son herramientas que ayudan a mantener la consistencia y calidad en archivos de texto, incluyendo documentos Markdown:

- **Linters**: Analizan el código/texto para identificar problemas, errores, inconsistencias y violaciones de estilo. Su objetivo es garantizar que el contenido cumpla con un conjunto predefinido de reglas.

- **Formatters**: Reorganizan automáticamente el texto para que cumpla con un estilo específico, aplicando reglas de formato consistentes sin cambiar el significado del contenido.

## ¿Por qué son importantes para Markdown?

A pesar de la aparente simplicidad de Markdown, estos analizadores y formateadores son cruciales por varias razones:

1. **Consistencia en proyectos colaborativos**: Cuando múltiples autores trabajan en la misma documentación, las variaciones en el estilo pueden acumularse rápidamente.

2. **Mantenibilidad a largo plazo**: Los documentos con formato coherente son más fáciles de mantener y actualizar.

3. **Prevención de errores**: Los linters pueden detectar problemas como enlaces rotos, imágenes mal referenciadas o estructuras de encabezados inconsistentes.

4. **Mejora de accesibilidad**: Algunas reglas de linting fomentan prácticas que mejoran la accesibilidad del contenido.

5. **Optimización para SEO**: Un Markdown bien estructurado puede convertirse en HTML que es más favorable para motores de búsqueda.

## Principales linters para Markdown

### markdownlint

Es uno de los linters más populares, disponible como:
- [markdownlint](https://github.com/DavidAnson/markdownlint) (Node.js)
- [markdownlint-cli](https://github.com/igorshubovych/markdownlint-cli) (Interfaz de línea de comandos)
- [markdownlint-cli2](https://github.com/DavidAnson/markdownlint-cli2) (CLI mejorada)

**Características principales**:
- Más de 40 reglas configurables
- Detección de problemas de formato, estilo y estructura
- Altamente personalizable mediante archivos de configuración
- Bien integrado con la mayoría de los editores

**Ejemplo de configuración** (`.markdownlint.json`):

```json
{
  "default": true,
  "MD013": false,
  "MD033": {
    "allowed_elements": ["br", "img"]
  },
  "line-length": false
}
```

### remark-lint

Parte del ecosistema [unified](https://unifiedjs.com/), [remark-lint](https://github.com/remarkjs/remark-lint) es un sistema de plugins que funciona con el procesador de Markdown remark.

**Características principales**:
- Enfoque modular con plugins para diferentes reglas
- Altamente extensible
- Integrado con el ecosistema de procesamiento de Markdown
- Soporte para AST (Abstract Syntax Tree)

**Ejemplo de configuración** (`.remarkrc.js`):

```javascript
exports.plugins = [
  require('remark-preset-lint-recommended'),
  [require('remark-lint-list-item-indent'), 'space'],
  [require('remark-lint-ordered-list-marker-value'), 'ordered'],
  [require('remark-lint-code-block-style'), 'fenced']
];
```

### Vale

[Vale](https://vale.sh/) es un linter de prosa configurable que soporta múltiples formatos, incluyendo Markdown.

**Características principales**:
- Enfocado en la calidad del contenido más que en la sintaxis
- Verificación estilística y gramatical 
- Personalizable con diccionarios y reglas específicas
- Ideal para equipos con guías de estilo estrictas

**Ejemplo de configuración** (`.vale.ini`):

```ini
StylesPath = styles
MinAlertLevel = suggestion

[*.md]
BasedOnStyles = write-good, proselint
write-good.E-Prime = NO
proselint.Very = YES
```

## Principales formatters para Markdown

### Prettier

[Prettier](https://prettier.io/) es un formateador de código opinado que soporta múltiples lenguajes, incluyendo Markdown.

**Características principales**:
- Formateado automático de Markdown con reglas consistentes
- Integración con la mayoría de los editores populares
- Opción de formato al guardar
- Mínima configuración necesaria

**Ejemplo de configuración** (`.prettierrc`):

```json
{
  "proseWrap": "always",
  "singleQuote": false,
  "trailingComma": "none",
  "printWidth": 80
}
```

### remark

Como mencionamos anteriormente, [remark](https://github.com/remarkjs/remark) no solo funciona como linter sino también como formateador de Markdown.

**Características principales**:
- Normaliza y estandariza la sintaxis de Markdown
- Puede reordenar y reestructurar el contenido
- Configurable a través de plugins
- Parte de un ecosistema más grande para procesamiento de contenido

**Ejemplo de uso con CLI**:

```bash
npx remark README.md --output README.md
```

### mdformat

[mdformat](https://github.com/executablebooks/mdformat) es un formateador de Markdown opinado centrado en producir una salida determinista.

**Características principales**:
- Formateo consistente y predecible
- Sistema de plugins para compatibilidad con extensiones de Markdown
- Enfoque en la simplicidad
- Buena integración con flujos de trabajo de Python

**Ejemplo de uso con CLI**:

```bash
pip install mdformat
mdformat archivo.md
```

## Integración con editores

La mayoría de los linters y formatters pueden integrarse con los editores más populares para ofrecer feedback inmediato y formato automático:

### Visual Studio Code

**Para markdownlint**:
1. Instala la extensión [markdownlint](https://marketplace.visualstudio.com/items?itemName=DavidAnson.vscode-markdownlint)
2. Los errores y advertencias aparecerán automáticamente
3. Configura con un archivo `.markdownlint.json` en la raíz del proyecto

**Para Prettier**:
1. Instala la extensión [Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)
2. Habilita "Format On Save" en la configuración
3. Configura con un archivo `.prettierrc` en la raíz del proyecto

### JetBrains (IntelliJ, WebStorm, etc.)

**Para markdownlint**:
- Utiliza el plugin [Markdown](https://plugins.jetbrains.com/plugin/7793-markdown)
- Configura las opciones de inspección en Settings > Editor > Inspections > Markdown

**Para Prettier**:
- Instala el plugin [Prettier](https://plugins.jetbrains.com/plugin/10456-prettier)
- Configura "On Save" en las opciones del plugin

### Vim/Neovim

**Para markdownlint**:
- Utiliza [ALE](https://github.com/dense-analysis/ale) o [coc.nvim](https://github.com/neoclide/coc.nvim) con el plugin correspondiente
- Configura tu `.vimrc` para activar el linting automático

**Para Prettier**:
- Configura [vim-prettier](https://github.com/prettier/vim-prettier)
- Añade mapeos para formato automático o al guardar

## Integración con CI/CD

La integración de linters en los pipelines de CI/CD asegura que toda la documentación mantenga una calidad consistente antes de ser publicada:

### GitHub Actions

**Ejemplo para markdownlint**:

```yaml
name: Markdown Linting

on: [push, pull_request]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Use Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '16'
      - name: Install dependencies
        run: npm install markdownlint-cli
      - name: Run markdownlint
        run: npx markdownlint '**/*.md' --ignore node_modules
```

### GitLab CI

**Ejemplo para markdownlint y Prettier**:

```yaml
markdown_lint:
  image: node:16-alpine
  stage: test
  script:
    - npm install markdownlint-cli prettier
    - npx markdownlint '**/*.md'
    - npx prettier --check '**/*.md'
  only:
    changes:
      - "**/*.md"
```

## Configurando reglas personalizadas

La mayoría de los linters permiten personalizar las reglas según tus necesidades específicas:

### Reglas personalizadas en markdownlint

Para desactivar la regla de longitud de línea y permitir algunos elementos HTML:

```json
{
  "default": true,
  "MD013": false,
  "MD033": { "allowed_elements": ["br", "img", "div"] },
  "MD041": { "level": 2 }
}
```

### Reglas personalizadas en Vale

Para crear una regla personalizada que detecte lenguaje demasiado técnico:

```yaml
# styles/Vocabulary/TechnicalTerms.yml
extends: existence
message: "Considera explicar el término técnico '%s' para lectores no técnicos."
level: suggestion
ignorecase: true
tokens:
  - blockchain
  - "machine learning"
  - paradigma
  - algoritmo
  - framework
  - middleware
```

## Comparativa de herramientas

| Herramienta | Tipo | Lenguaje de implementación | Configurabilidad | Integraciones | Velocidad | Facilidad de uso |
|-------------|------|----------------------------|-----------------|--------------|-----------|-----------------|
| markdownlint | Linter | JavaScript | Alta | VSCode, IDE JetBrains, CI/CD | Alta | Sencilla |
| remark-lint | Linter/Formatter | JavaScript | Muy alta | Ecosistema unified, CI/CD | Media | Media |
| Vale | Linter | Go | Alta | VSCode, CI/CD | Alta | Media |
| Prettier | Formatter | JavaScript | Baja | VSCode, IDE JetBrains, CI/CD | Alta | Muy sencilla |
| mdformat | Formatter | Python | Media | Python, CLI | Alta | Sencilla |

## Ejercicios prácticos

### Ejercicio 1: Configurar markdownlint

1. Instala markdownlint-cli:
   ```bash
   npm install -g markdownlint-cli
   ```

2. Crea un archivo `.markdownlint.json` en la raíz de tu proyecto con esta configuración básica:
   ```json
   {
     "default": true,
     "MD013": { "line_length": 100 },
     "MD033": { "allowed_elements": ["br", "img"] }
   }
   ```

3. Ejecuta markdownlint en tus archivos Markdown:
   ```bash
   markdownlint "**/*.md"
   ```

4. Corrige los errores reportados y vuelve a ejecutar el linter.

### Ejercicio 2: Formatear con Prettier

1. Instala Prettier:
   ```bash
   npm install -g prettier
   ```

2. Crea un archivo `.prettierrc` en la raíz del proyecto:
   ```json
   {
     "proseWrap": "always",
     "printWidth": 100,
     "tabWidth": 2,
     "useTabs": false
   }
   ```

3. Ejecuta Prettier en un archivo Markdown:
   ```bash
   prettier --write README.md
   ```

4. Observa los cambios realizados y ajusta la configuración según tus preferencias.

### Ejercicio 3: Integración con CI/CD

1. Crea un archivo `.github/workflows/markdown-quality.yml` con el siguiente contenido:
   ```yaml
   name: Markdown Quality

   on:
     push:
       paths:
         - '**/*.md'
     pull_request:
       paths:
         - '**/*.md'

   jobs:
     lint:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3
         - uses: actions/setup-node@v3
           with:
             node-version: '16'
         - name: Install dependencies
           run: npm install markdownlint-cli prettier
         - name: Run markdownlint
           run: npx markdownlint '**/*.md' --ignore node_modules
         - name: Check formatting with Prettier
           run: npx prettier --check '**/*.md'
   ```

2. Sube este archivo a tu repositorio GitHub para activar las comprobaciones automáticas.

---

Los linters y formatters son herramientas esenciales para mantener la calidad y consistencia en documentos Markdown, especialmente en proyectos grandes y colaborativos. Al integrarlos en tu flujo de trabajo, puedes centrarte en el contenido mientras las herramientas se ocupan de mantener la coherencia estilística y prevenir errores comunes.

---

## Referencias y recursos adicionales

- [Documentación oficial de markdownlint](https://github.com/DavidAnson/markdownlint)
- [Guía de estilo para Markdown de Google](https://github.com/google/styleguide/blob/gh-pages/docguide/style.md)
- [Documentación de Vale](https://vale.sh/docs/)
- [Opciones de configuración de Prettier para Markdown](https://prettier.io/docs/en/options.html)
